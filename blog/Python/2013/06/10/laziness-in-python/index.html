
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>蟒之惰性 - conan @ notes:~/</title>
	<meta name="author" content="Conan">

	
	<meta name="description" content="蟒之惰性 上一篇日誌其實是發生在我研究了一些 lazy evaluation 之後，有感而發；最初我本來只是想寫現在的這篇博客的，聊一聊 Python 的惰性。如果對編程語言以及編程思想的惰性的定義還不明的話，可以參看我的上篇日誌以及 Wikipedia。 Python本身是具有惰性的，我在《 &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="conan @ notes:~/" type="application/atom+xml">
	
	<link rel="canonical" href="http://ConanChou.github.io/blog/python/2013/06/10/laziness-in-python/">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$']],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  messageStyle: "none",
  "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
});
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>

</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">	
	<script src="/javascripts/md5.js"></script>
	<script type="text/javascript">
		document.write("<img src='http://www.gravatar.com/avatar/" + MD5("conanchou1412@gmail.com") + "?s=160' alt='Profile Picture' style='width: 160px;'");
	</script>
</div>
<h1><a href="/">conan @ notes:~/</a></h1>
<p class="subtitle">notes about hack</p>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="sub-nav">
	<div class="social">
		
		
		<a class="google" href="https://plus.google.com/102737685811403816436?rel=author" title="Google+">Google+</a>
		
		
		<a class="twitter" href="http://twitter.com/ConanChou" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/ConanChou" title="GitHub">GitHub</a>
		
		
		
		
		<a class="delicious" href="http://delicious.com/ConanChou" title="Delicious">Delicious</a>
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>

</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name">蟒之惰性</h1>
	<div class="entry-content" itemprop="articleBody"><p><a href="http://conanchou.github.io/blog/Thought/2013/06/09/just-in-case-vs-just-in-time/">上一篇日誌</a>其實是發生在我研究了一些 lazy evaluation 之後，有感而發；最初我本來只是想寫現在的這篇博客的，聊一聊 Python 的惰性。如果對編程語言以及編程思想的惰性的定義還不明的話，可以參看我的上篇日誌以及 Wikipedia。</p>

<p>Python本身是具有惰性的，我在<a href="http://conanchou.github.io/blog/Python/Optimization/Serial/Programming/2012/08/26/python-optimization-4-high-performance-python-general-coding-tips/">《Python 調優筆記 · 經驗主義調優》</a>的「懶惰&gt;勤勞」小節就已經說了一些。我們接下來要看看Python中更高級一點的惰性用法。<!--more--></p>

<h1 id="generator">Generator</h1>

<p>我不知道是不是應該給這個專有名詞硬塞上一個中文翻譯，但如果需要的話，我覺得叫生產器吧。它就像是個手動絞肉機，需要肉末的時候就搖一下，不需要了也就停在剛剛的狀態。假設我們現在有個 function，它的作用是輸出0到9999之間的數被幾個不明操作之後的數的列表。那我們有可能這樣寫：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="k">def</span> <span class="nf">range10000</span><span class="p">():</span>
</span><span class="line">    <span class="n">l</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class="line">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">):</span>
</span><span class="line">        <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f2</span><span class="p">(</span><span class="n">f1</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
</span><span class="line">    <span class="k">return</span> <span class="n">l</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>邏輯上來說這個程序沒什麼問題，但是不是可以做得更好呢？可以用 lambda 和 list comprehension 來一行代碼解決，這麼做好在哪裏呢？技術上來說 list comprehension 的效率比顯式循環體高，從逼格角度說更接近函數式編程。那能不能做得更好一些呢？假設之後的代碼中只需要<code>range10000()</code>生產出的list的前十個。也就是說後面的9980個運算是浪費資源的。即便<code>f1()</code>和<code>f2()</code>的複雜度都是O(1)，這也是莫大的浪費。要是能夠推遲<code>range10000()</code>的運算就好了。所以這裏我們就可以使用惰性求值的小技巧，具體來說，我們將用到關鍵詞<code>yield</code>：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="k">def</span> <span class="nf">lazy_range10000</span><span class="p">():</span>
</span><span class="line">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">):</span>
</span><span class="line">        <span class="k">yield</span> <span class="n">f2</span><span class="p">(</span><span class="n">f1</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>之後的調用：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="o">&gt;&gt;&gt;</span> <span class="n">g</span> <span class="o">=</span> <span class="n">lazy_range10000</span><span class="p">()</span>
</span><span class="line"><span class="o">&gt;&gt;&gt;</span> <span class="n">g</span>
</span><span class="line"><span class="o">&lt;</span><span class="n">generator</span> <span class="nb">object</span> <span class="n">lazy_gen</span> <span class="n">at</span> <span class="mh">0x7f2e47ba43c0</span><span class="o">&gt;</span>
</span><span class="line"><span class="o">&gt;&gt;&gt;</span> <span class="n">g</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
</span><span class="line"><span class="mi">0</span>
</span><span class="line"><span class="o">&gt;&gt;&gt;</span> <span class="n">g</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
</span><span class="line"><span class="mi">1</span>
</span><span class="line"><span class="o">&gt;&gt;&gt;</span> <span class="n">g</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
</span><span class="line"><span class="mi">2</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>從這個簡單的例子我們可以看出<code>yield</code>在此起到的作用是返回一個 Generator 對象，而這個對象會記住自己的狀態，在這個例子裏就是循環體循環的次數。每次調用<code>next()</code>時，才會做真正的計算。換句話說，這個技巧是推遲了計算的執行，即惰性求值。這麼一來，不但不會浪費CPU計算資源，也不會因爲要存儲額外數據而造成的內存空間的浪費。第一個例子主要還是體現了在CPU資源上的節約，下面我們再舉一個更加極端的例子來感受一下，生成無限多的連續數：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="k">def</span> <span class="nf">infinitely_inc</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span class="line">    <span class="n">n</span> <span class="o">=</span> <span class="n">start</span> <span class="o">-</span> <span class="mi">1</span>
</span><span class="line">    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
</span><span class="line">        <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class="line">        <span class="k">yield</span> <span class="n">n</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>對 Python 內建函數比較瞭解的同學應該是注意到了 Generator 對象的 <code>next()</code>，它跟 iterator 類型是一樣的，遵從 <em>Iterator protocol</em>，即有<code>next()</code>和<code>__iter__()</code>函數，會拋<code>StopIteration</code>異常。而且，跟list一樣，它也有類似list comprehension 的寫法，區別僅在於把list comprehension 的<code>[]</code>換成<code>()</code>：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="o">&gt;&gt;&gt;</span> <span class="n">squares</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span> <span class="c"># list</span>
</span><span class="line"><span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="n">squares</span><span class="p">)</span>
</span><span class="line"><span class="o">&lt;</span><span class="nb">type</span> <span class="s">&#39;list&#39;</span><span class="o">&gt;</span>
</span><span class="line"><span class="o">&gt;&gt;&gt;</span> <span class="n">gen_squares</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span> <span class="c"># Generator 對象</span>
</span><span class="line"><span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="n">gen_squares</span><span class="p">)</span>
</span><span class="line"><span class="o">&lt;</span><span class="nb">type</span> <span class="s">&#39;generator&#39;</span><span class="o">&gt;</span>
</span><span class="line"><span class="o">&gt;&gt;&gt;</span> <span class="nb">iter</span><span class="p">(</span><span class="n">gen_squares</span><span class="p">)</span> <span class="ow">is</span> <span class="n">gen_squares</span>
</span><span class="line"><span class="bp">True</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Generator 看起來是個好物，但是它也有自己的使用注意事項，這裏我主要說一說除了惰性求值共性問題（見<a href="http://conanchou.github.io/blog/Thought/2013/06/09/just-in-case-vs-just-in-time/">上一篇日誌</a>）之外的注意事項。</p>

<p>第一點非常淺顯易懂，Generator 產生的序列只能使用一次，也就是說，如果生成的序列需要多次使用的話，還是選擇<code>list</code>。不要硬用 Generator，強扭的瓜不甜，你懂的。</p>

<p>第二點比較 tricky。就是要注意變量的作用域。下面我直接上一段代碼，想一下輸出結果是什麼：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
</span><span class="line">    <span class="k">return</span> <span class="n">s</span> <span class="o">+</span> <span class="n">x</span>
</span><span class="line"><span class="k">def</span> <span class="nf">gen</span><span class="p">():</span>
</span><span class="line">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
</span><span class="line">        <span class="k">yield</span> <span class="n">i</span>
</span><span class="line"><span class="n">base</span> <span class="o">=</span> <span class="n">gen</span><span class="p">()</span>
</span><span class="line"><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
</span><span class="line"><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">numbers</span><span class="p">:</span>
</span><span class="line">    <span class="n">base</span> <span class="o">=</span> <span class="p">(</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">base</span><span class="p">)</span>
</span><span class="line"><span class="k">print</span> <span class="nb">list</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>猜<code>[11, 12, 13, 14]</code>的同學，恭喜你們成功跳進了陷阱。上面代碼的運行結果是<code>[20, 21, 22,
23]</code>。不信貼到自己的環境裏跑跑看。爲什麼呢？<code>numbers</code>裏的<code>1</code>壓根不見了？其實是因爲直到最後一句<code>list(base)</code>的時候運算才被出發，而此時本地變量<code>n</code>已經循環到了最後一個，即<code>10</code>。又因爲有兩個數字要加，就變成了把10加了兩遍。理解這個過程的難點在於，要時刻提醒自己惰性求值發生的時間點在哪裏，以及它所記住的狀態（或變量）都包含哪些。下面爲了方便理解，我貼一個本程序跑的時候在內存裏的慢動作，還沒弄明白的同學可以一步一步看：</p>

<iframe width="960" height="600" frameborder="0" src="http://pythontutor.com/iframe-embed.html#code=def+add(s,+x)%3A%0A++++return+s+%2B+x%0A%0Adef+gen()%3A%0A++++for+i+in+range(4)%3A%0A++++++++yield+i%0A++++++++%0Abase+%3D+gen()%0Anumbers+%3D+%5B1,+10%5D%0Afor+n+in+numbers%3A%0A++++base+%3D+(add(i,+n)+for+i+in+base)%0Aprint+list(base)&amp;cumulative=false&amp;heapPrimitives=false&amp;drawParentPointers=false&amp;textReferences=false&amp;showOnlyOutputs=false&amp;py=2&amp;curInstr=0"> </iframe>

<p>Generator 惰性求值玩脫了怎麼破？其實原理上來說很簡單，上面的問題就是因爲我們希望 Generator 記住的東西沒記住，那我們只要讓它記住不就完了？所以我們可以給<code>add()</code>寫個 wrapper，把要傳進去的<code>x</code>的狀態記住：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
</span><span class="line">    <span class="k">return</span> <span class="n">s</span> <span class="o">+</span> <span class="n">x</span>
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">gen</span><span class="p">():</span>
</span><span class="line">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
</span><span class="line">        <span class="k">yield</span> <span class="n">i</span>
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">add_wrapper</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
</span><span class="line">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">base</span><span class="p">:</span>
</span><span class="line">        <span class="k">yield</span> <span class="n">i</span> <span class="o">+</span> <span class="n">num</span>
</span><span class="line">
</span><span class="line"><span class="n">base</span> <span class="o">=</span> <span class="n">gen</span><span class="p">()</span>
</span><span class="line"><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
</span><span class="line"><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">numbers</span><span class="p">:</span>
</span><span class="line">    <span class="n">base</span> <span class="o">=</span> <span class="n">add_wrapper</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
</span><span class="line"><span class="k">print</span> <span class="nb">list</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>以上便是如何用 Generator 來寫內存高效的代碼的簡介。僅僅是一窺，有興趣的同學可以去多搜一搜相關詞條以及翻閱《Core Python Programming》的相關章節。帶着對惰性求值的初步瞭解，我們接着將看一看 Python 給我們準備了什麼樣的語法糖做禮物。</p>

<h1 id="itertools"><code>itertools</code></h1>

<p>這是一個<a href="http://docs.python.org/2/library/itertools.html">Python 模塊</a>，它的出現是受啓發於 APL，Haskell 和 SML 這些在函數式編程世界中有深遠意義的語言。Laziness 自然也被傳承下來。我們不妨先通過一些簡單的例子來對比一下普通和惰性兩種方法，以及<code>itertools</code>的用法。更多更詳細的資料還請看官方文檔。</p>

<p>假設我們現在要找到100以內前10個可以被3整除或可以被7整除的數。普通版我們可能會這麼做：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">my_filter</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
</span><span class="line">   <span class="o">...</span><span class="p">:</span>     <span class="k">print</span> <span class="s">&#39;Checking </span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">x</span>
</span><span class="line">   <span class="o">...</span><span class="p">:</span>     <span class="k">return</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">7</span> <span class="o">==</span> <span class="mi">0</span>
</span><span class="line">   <span class="o">...</span><span class="p">:</span>
</span><span class="line">
</span><span class="line"><span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="nb">filter</span><span class="p">(</span><span class="n">my_filter</span><span class="p">,</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">100</span><span class="p">))[:</span><span class="mi">10</span><span class="p">]</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">0</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">1</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">2</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">3</span>
</span><span class="line"><span class="c"># ...</span>
</span><span class="line"><span class="c"># 因篇幅較長已被省略</span>
</span><span class="line"><span class="c"># ...</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">98</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">99</span>
</span><span class="line"><span class="n">Out</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">21</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>惰性版：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">islice</span><span class="p">,</span> <span class="n">ifilter</span>
</span><span class="line">
</span><span class="line"><span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">first_ten</span> <span class="o">=</span> <span class="n">islice</span><span class="p">(</span><span class="n">ifilter</span><span class="p">(</span><span class="n">my_filter</span><span class="p">,</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">100</span><span class="p">)),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="nb">type</span><span class="p">(</span><span class="n">first_ten</span><span class="p">)</span>
</span><span class="line"><span class="n">Out</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">itertools</span><span class="o">.</span><span class="n">islice</span>
</span><span class="line">
</span><span class="line"><span class="n">In</span> <span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">first_ten</span><span class="p">:</span>
</span><span class="line">   <span class="o">....</span><span class="p">:</span>     <span class="k">print</span> <span class="n">i</span>
</span><span class="line">   <span class="o">....</span><span class="p">:</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">0</span>
</span><span class="line"><span class="mi">0</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">1</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">2</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">3</span>
</span><span class="line"><span class="mi">3</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">4</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">5</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">6</span>
</span><span class="line"><span class="mi">6</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">7</span>
</span><span class="line"><span class="mi">7</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">8</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">9</span>
</span><span class="line"><span class="mi">9</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">10</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">11</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">12</span>
</span><span class="line"><span class="mi">12</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">13</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">14</span>
</span><span class="line"><span class="mi">14</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">15</span>
</span><span class="line"><span class="mi">15</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">16</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">17</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">18</span>
</span><span class="line"><span class="mi">18</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">19</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">20</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">21</span>
</span><span class="line"><span class="mi">21</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>代碼上來說主要是<code>In [2]</code>和<code>In [4]</code>的區別，即<code>filter()</code>換成了<code>ifilter()</code>，<code>[:10]</code> slicing 的方法換成了函數<code>islice()</code>的方法。那最終效果上來說呢，結果都是預計的結果，但是前者測試了很多多餘的數字。</p>

<p>這篇日誌剛開始的時候我們自己寫過一個無限自增生成器。那其實<code>itertools</code>裏有個<code>count()</code>就是幹的這事兒。所以我們接着上面的例子，求8964之後的10個能被3整除或能被7整除的數：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">In</span> <span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">count</span>
</span><span class="line">
</span><span class="line"><span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="n">first_ten</span> <span class="o">=</span> <span class="n">islice</span><span class="p">(</span><span class="n">ifilter</span><span class="p">(</span><span class="n">my_filter</span><span class="p">,</span> <span class="n">count</span><span class="p">(</span><span class="mi">8964</span><span class="p">)),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="n">In</span> <span class="p">[</span><span class="mi">9</span><span class="p">]:</span> <span class="nb">list</span><span class="p">(</span><span class="n">first_ten</span><span class="p">)</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">8964</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">8965</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">8966</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">8967</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">8968</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">8969</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">8970</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">8971</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">8972</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">8973</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">8974</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">8975</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">8976</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">8977</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">8978</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">8979</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">8980</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">8981</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">8982</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">8983</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">8984</span>
</span><span class="line"><span class="n">Checking</span> <span class="mi">8985</span>
</span><span class="line"><span class="n">Out</span><span class="p">[</span><span class="mi">9</span><span class="p">]:</span> <span class="p">[</span><span class="mi">8964</span><span class="p">,</span> <span class="mi">8967</span><span class="p">,</span> <span class="mi">8970</span><span class="p">,</span> <span class="mi">8973</span><span class="p">,</span> <span class="mi">8974</span><span class="p">,</span> <span class="mi">8976</span><span class="p">,</span> <span class="mi">8979</span><span class="p">,</span> <span class="mi">8981</span><span class="p">,</span> <span class="mi">8982</span><span class="p">,</span> <span class="mi">8985</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>分組處理的操作我們平時也經常做，<code>itertools</code>裏就有個很好的函數叫<code>groupby()</code>，不過它的使用還有個注意事項。比如我們現在要將一堆數字分到奇偶兩個組裏。感覺這樣做應該沒問題：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">In</span> <span class="p">[</span><span class="mi">10</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">groupby</span>
</span><span class="line">
</span><span class="line"><span class="n">In</span> <span class="p">[</span><span class="mi">11</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">groupby_odd_even</span><span class="p">(</span><span class="n">numbers</span><span class="p">):</span>
</span><span class="line">   <span class="o">....</span><span class="p">:</span>     <span class="n">odd_even_filter</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s">&#39;even&#39;</span> <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="s">&#39;odd&#39;</span>
</span><span class="line">   <span class="o">....</span><span class="p">:</span>     <span class="n">num_groups</span> <span class="o">=</span> <span class="n">groupby</span><span class="p">(</span><span class="n">numbers</span><span class="p">,</span> <span class="n">odd_even_filter</span><span class="p">)</span>
</span><span class="line">   <span class="o">....</span><span class="p">:</span>     <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">num_groups</span><span class="p">:</span>
</span><span class="line">   <span class="o">....</span><span class="p">:</span>         <span class="k">print</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="s">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">v</span><span class="p">)))</span>
</span><span class="line">   <span class="o">....</span><span class="p">:</span>
</span><span class="line">
</span><span class="line"><span class="n">In</span> <span class="p">[</span><span class="mi">12</span><span class="p">]:</span> <span class="n">groupby_odd_even</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
</span><span class="line"><span class="n">odd</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span>
</span><span class="line"><span class="n">even</span><span class="p">:</span> <span class="mi">2</span>
</span><span class="line"><span class="n">odd</span><span class="p">:</span> <span class="mi">7</span>
</span><span class="line"><span class="n">even</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span><span class="mi">6</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>從結果看，這個<code>groupby()</code>看起來不太對，怎麼出現了多組奇偶數呢？原因是因爲<code>groupby()</code>只組合 list 裏相鄰近的個體。所以如果要把組合併到一起，可以先把每個元素按組標排序，然後再分組：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">In</span> <span class="p">[</span><span class="mi">13</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">groupby_odd_even</span><span class="p">(</span><span class="n">numbers</span><span class="p">):</span>
</span><span class="line">   <span class="o">....</span><span class="p">:</span>     <span class="n">odd_even_filter</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s">&#39;even&#39;</span> <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="s">&#39;odd&#39;</span>
</span><span class="line">   <span class="o">....</span><span class="p">:</span>     <span class="n">num_groups</span> <span class="o">=</span> <span class="n">groupby</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">numbers</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">odd_even_filter</span><span class="p">),</span> <span class="n">odd_even_filter</span><span class="p">)</span>
</span><span class="line">   <span class="o">....</span><span class="p">:</span>     <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">num_groups</span><span class="p">:</span>
</span><span class="line">   <span class="o">....</span><span class="p">:</span>         <span class="k">print</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="s">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">v</span><span class="p">)))</span>
</span><span class="line">   <span class="o">....</span><span class="p">:</span>
</span><span class="line">
</span><span class="line"><span class="n">In</span> <span class="p">[</span><span class="mi">14</span><span class="p">]:</span> <span class="n">groupby_odd_even</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
</span><span class="line"><span class="n">even</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span>
</span><span class="line"><span class="n">odd</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>寫到這兒也差不多了，這篇日誌的主要目的也就是想說 Python 的惰性、原理以及惰性相關的語言特性。這方面的知識和信息還有很多，有興趣的同學可以把這篇日誌當起點繼續研究，這只是拋磚引玉。舉最後一個不加解說的例子，展示一下其它一些我沒介紹過的函數作爲結尾：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">In</span> <span class="p">[</span><span class="mi">15</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">ifilter</span><span class="p">,</span> <span class="n">takewhile</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">imap</span><span class="p">,</span> <span class="n">chain</span>
</span><span class="line">
</span><span class="line"><span class="n">In</span> <span class="p">[</span><span class="mi">16</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">factors</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
</span><span class="line">   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="n">ifilter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">n</span> <span class="o">%</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">takewhile</span><span class="p">(</span><span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="n">y</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">,</span> <span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
</span><span class="line">   <span class="o">....</span><span class="p">:</span>
</span><span class="line">
</span><span class="line"><span class="n">In</span> <span class="p">[</span><span class="mi">17</span><span class="p">]:</span> <span class="nb">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="nb">map</span><span class="p">(</span><span class="nb">set</span><span class="p">,</span> <span class="n">imap</span><span class="p">(</span><span class="n">factors</span><span class="p">,</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">81</span><span class="p">,</span><span class="mi">60</span><span class="p">])))</span>
</span><span class="line"><span class="n">Out</span><span class="p">[</span><span class="mi">17</span><span class="p">]:</span> <span class="nb">set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</span><span class="line">
</span><span class="line"><span class="n">In</span> <span class="p">[</span><span class="mi">18</span><span class="p">]:</span> <span class="nb">set</span><span class="p">(</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="n">imap</span><span class="p">(</span><span class="n">factors</span><span class="p">,</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">81</span><span class="p">,</span><span class="mi">60</span><span class="p">])))</span>
</span><span class="line"><span class="n">Out</span><span class="p">[</span><span class="mi">18</span><span class="p">]:</span> <span class="nb">set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">81</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">30</span><span class="p">])</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</div>

</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
	
	
	
	<a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>



<section id="comment">
    <h1 class="title">Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
			</div>
			<footer id="footer" class="inner">Copyright &copy; 2014

    Conan


</footer>
			<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'conannotes';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://ConanChou.github.io/blog/python/2013/06/10/laziness-in-python/';
        var disqus_url = 'http://ConanChou.github.io/blog/python/2013/06/10/laziness-in-python/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-33556525-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



		</div>
	</div>
</body>
</html>
